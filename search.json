[{"path":"https://ropengov.github.io/rwfs/index.html","id":"rwfs-","dir":"","previous_headings":"","what":"R Clients for Open Geospatial Consortium's Web Feature Services","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"WFS client R Original author: Jussi Jousimo Maintainers: Joona Lehtomäki License: FreeBSD","code":""},{"path":"https://ropengov.github.io/rwfs/index.html","id":"overview","dir":"","previous_headings":"","what":"Overview","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"R package provides client access Web Feature Service (WFS). core functionality build top sf package.","code":""},{"path":[]},{"path":"https://ropengov.github.io/rwfs/index.html","id":"installation","dir":"","previous_headings":"Usage","what":"Installation","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"rwfs can installed GitHub using devtools: loaded ","code":"install.packages(\"devtools\") library(\"devtools\") devtools::install_github(\"ropengov/rwfs\") library(rwfs)"},{"path":"https://ropengov.github.io/rwfs/index.html","id":"request-and-client-classes","dir":"","previous_headings":"Usage","what":"Request and client classes","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"package consists request client classes type R6. request classes used construct reference data source provide access methods data. client classes dispatch request obtain possibly manipulate data. request classes currently implemented WFSStreamingRequest streaming data directly WFS, WFSCachingRequest downloading data WFS caching disk GMLFile reading data GML file. request classes abstract exception GMLFile meaning user rwfs must provide subclass relevant class implement abstract methods classes. user may provide additional methods accessing data convenience. following client classes currently implemented WFSStreamingClient streaming requests WFSCachingClient downloading caching requests local file access requests. client classes available used directly. However, additional methods manipulating data user convenience can provided inheriting classes. following sections, illustrate use rwfs package following two examples taken packages gisfin fmi.","code":""},{"path":"https://ropengov.github.io/rwfs/index.html","id":"inheritance-of-request-classes","dir":"","previous_headings":"Usage","what":"Inheritance of request classes","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"streaming, WFSStreamingRequest abstract class required inherited subclass implements abstract method getDataSource(), provides data access reference. example (taken gisfin), following class provides URL access data private method getURL(), called getDataSource(): method getGeoStatFiLayers(path) lists available layers setting path, refers data set behind path service, method getGeoStatFiLayer(path, layers) obtains layer layer path data set. rest methods convenience purpose user cover available data sets service. Similar WFSStreamingRequest, WFSCachingRequest must implement getURL abstract method (example taken fmi): class provides also mechnism storing API key, required access service.","code":"GeoStatFiWFSRequest <- R6::R6Class(   \"GeoStatFiWFSRequest\",   inherit = rwfs::WFSStreamingRequest,   private = list(     getURL = function() {       url <- paste0(\"http://geo.stat.fi/geoserver/\", private$getPathString(), \"/wfs?\", private$getParametersString())       return(url)     }   ),   public = list(     getDataSource = function() private$getURL(),          getGeoStatFiLayers = function(path) {       if (missing(path))         stop(\"Required argument 'path' missing.\")             return(self$setPath(path)$getCapabilities())     },      getGeoStatFiLayer = function(path, layer) {       if (missing(path))         stop(\"Required argument 'path' missing.\")             if (missing(layer))         stop(\"Required argument 'layer' missing.\")       return(self$setPath(path)$getFeature(typeName=layer))     },          getPopulationLayers = function() self$getGeoStatFiLayers(\"vaestoruutu\"),     getPopulation = function(layer) self$getGeoStatFiLayer(\"vaestoruutu\", layer),     getProductionAndIndustrialFacilitiesLayers = function() self$getGeoStatFiLayers(\"ttlaitokset/ttlaitokset:toimipaikat\"),     getProductionAndIndustrialFacilities = function(layer=\"ttlaitokset:toimipaikat\") self$getGeoStatFiLayer(\"ttlaitokset/ttlaitokset:toimipaikat\", layer),     getEducationalInstitutionsLayers = function() self$getGeoStatFiLayers(\"oppilaitokset/oppilaitokset:oppilaitokset\"),     getEducationalInstitutions = function(layer=\"oppilaitokset:oppilaitokset\") self$getGeoStatFiLayer(\"oppilaitokset/oppilaitokset:oppilaitokset\", layer),     getRoadAccidentsLayers = function() self$getGeoStatFiLayers(\"tieliikenne\"),     getRoadAccidents = function(layer) self$getGeoStatFiLayer(\"tieliikenne\", layer),     getPostalCodeAreaLayers = function() self$getGeoStatFiLayers(\"postialue\"),     getPostalCodeArea = function(layer) self$getGeoStatFiLayer(\"postialue\", layer)   ) ) FMIWFSRequest <- R6::R6Class(   \"FMIWFSRequest\",   inherit = rwfs::WFSCachingRequest,   private = list(     apiKey = NA,          getURL = function() {       url <- paste0(\"http://data.fmi.fi/fmi-apikey/\", private$apiKey, \"/wfs?\", private$getParametersString())       return(url)     }   ),   public = list(     initialize = function(apiKey) {       if (missing(apiKey))         stop(\"Must specify the 'apiKey' parameter.\")       private$apiKey <- apiKey     }       ) )"},{"path":"https://ropengov.github.io/rwfs/index.html","id":"inheritance-of-client-classes","dir":"","previous_headings":"Usage","what":"Inheritance of client classes","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"Continuing example gisfin, need inherit WFSStreamingClient. However, consistency package provides class GeoStatFiWFSClient inheriting WFSStreamingClient, exactly class different name. FMIWFSClient class inheriting WFSCachingClient fmi example, sets service access parameters returns data formatting . example, getMonthlyWeatherRaster calls setParameters() method request object getRaster() superclass obtain raster object. getMonthlyWeatherRaster() method first checks request object given typeFMIWFSRequest. method also data manipulation setting layer names raster object.","code":"FMIWFSClient <- R6::R6Class(   \"FMIWFSClient\",   inherit = rwfs::WFSCachingClient,   private = list(     processParameters = function(startDateTime=NULL, endDateTime=NULL, bbox=NULL, fmisid=NULL) {       [...]     },          getRasterURL = function(parameters) {       [...]     }   ),   public = list(     getDailyWeather = function(variables=c(\"rrday\",\"snow\",\"tday\",\"tmin\",\"tmax\"), startDateTime, endDateTime, bbox=NULL, fmisid=NULL) {             [...]     },          getMonthlyWeatherRaster = function(startDateTime, endDateTime) {       if (inherits(private$request, \"FMIWFSRequest\")) {         if (missing(startDateTime) | missing(endDateTime))           stop(\"Arguments 'startDateTime' and 'endDateTime' must be provided.\")                  p <- private$processParameters(startDateTime=startDateTime, endDateTime=endDateTime)         private$request$setParameters(request=\"getFeature\",                                       storedquery_id=\"fmi::observations::weather::monthly::grid\",                                       starttime=p$startDateTime,                                       endtime=p$endDateTime)       }              response <- self$getRaster(parameters=list(splitListFields=TRUE))       if (is.character(response)) return(character())       NAvalue(response) <- 9999       names(response) <- getRasterLayerNames(startDateTime=startDateTime,                                              endDateTime=endDateTime,                                              by=\"month\",                                              variables=c(\"MeanTemperature\", \"Precipitation\"))       return(response)     }   ) )"},{"path":"https://ropengov.github.io/rwfs/index.html","id":"accessing-wfs","dir":"","previous_headings":"Usage","what":"Accessing WFS","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"defined appropriate subclasses, can build request object access WFS obtain data client object. examples, please look vignettes gisfin fmi packages.","code":""},{"path":"https://ropengov.github.io/rwfs/index.html","id":"file-access","dir":"","previous_headings":"Usage","what":"File access","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"example access local GML file:","code":"library(rwfs) fileName <- tempfile() download.file(\"http://geo.stat.fi/geoserver/vaestoalue/wfs?service=WFS&version=1.0.0&request=GetFeature&typeName=vaestoalue:suuralue_vaki2014\", fileName) request <- rwfs::GMLFile$new(fileName) client <- rwfs::WFSCachingClient$new(request) layer <- client$getLayer(\"suuralue_vaki2014\") print(layer@data) plot(layer) unlink(fileName)"},{"path":"https://ropengov.github.io/rwfs/index.html","id":"contact","dir":"","previous_headings":"","what":"Contact","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"welcome : submit suggestions bug-reports compose friendly e-mail : jvj@iki.fi join IRC !louhos@IRCnet (Finland) ropengov@Freenode (international) follow us social media: Louhos (Finland); rOpenGov (international)","code":""},{"path":"https://ropengov.github.io/rwfs/index.html","id":"acknowledgements","dir":"","previous_headings":"","what":"Acknowledgements","title":"R Clients for Open Geospatial Consortium's Web Feature Services","text":"Roger Bivand helping getting WFS driver working Windows.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/GMLFile.html","id":null,"dir":"Reference","previous_headings":"","what":"A class for providing a file name reference to a GML document — GMLFile","title":"A class for providing a file name reference to a GML document — GMLFile","text":"class providing file name reference GML document.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/GMLFile.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"A class for providing a file name reference to a GML document — GMLFile","text":"Jussi Jousimo jvj@iki.fi","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSCachingClient.html","id":null,"dir":"Reference","previous_headings":"","what":"Downloads response from a WFS and parses the intermediate file — WFSCachingClient","title":"Downloads response from a WFS and parses the intermediate file — WFSCachingClient","text":"Dispatches WFS request, saves response file parses file. data can converted using ogr2ogr RGDAL. Provides caching mechanism subsequent queries data.","code":""},{"path":[]},{"path":"https://ropengov.github.io/rwfs/reference/WFSCachingClient.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Downloads response from a WFS and parses the intermediate file — WFSCachingClient","text":"Jussi Jousimo jvj@iki.fi","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSCachingRequest.html","id":null,"dir":"Reference","previous_headings":"","what":"An abstract class for building a URL reference to a WFS with a caching — WFSCachingRequest","title":"An abstract class for building a URL reference to a WFS with a caching — WFSCachingRequest","text":"abstract method getURL must overloaded subclass provide request URL WFS service.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSCachingRequest.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"An abstract class for building a URL reference to a WFS with a caching — WFSCachingRequest","text":"Jussi Jousimo jvj@iki.fi","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSClient.html","id":null,"dir":"Reference","previous_headings":"","what":"Class represeting a WFS client — WFSClient","title":"Class represeting a WFS client — WFSClient","text":"abstract class represent OGC's WFS client R. client classes package inherit class.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSClient.html","id":"format","dir":"Reference","previous_headings":"","what":"Format","title":"Class represeting a WFS client — WFSClient","text":"R6Class object.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSClient.html","id":"fields","dir":"Reference","previous_headings":"","what":"Fields","title":"Class represeting a WFS client — WFSClient","text":"test","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSClient.html","id":"methods","dir":"Reference","previous_headings":"","what":"Methods","title":"Class represeting a WFS client — WFSClient","text":"new(request) method used create object          class request request object containing WFS         connection information methods. NOTE: abstract class,         creating instances . setRequest(request) Set client's request object request,          must inherit WFSRequest. listLayers() implemented abstract class, classes         inheriting class. getLayer implemented abstract class, classes         inheriting class. getRaster Get raster layer WFS","code":""},{"path":[]},{"path":"https://ropengov.github.io/rwfs/reference/WFSClient.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Class represeting a WFS client — WFSClient","text":"Jussi Jousimo jvj@iki.fi,         Joona Lehtomaki joona.lehtomaki@gmail.com","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSRequest.html","id":null,"dir":"Reference","previous_headings":"","what":"An abstract class for referencing a WFS or a GML document — WFSRequest","title":"An abstract class for referencing a WFS or a GML document — WFSRequest","text":"class inherited abstract method getDataSource overloaded subclass provide reference.","code":""},{"path":[]},{"path":"https://ropengov.github.io/rwfs/reference/WFSRequest.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"An abstract class for referencing a WFS or a GML document — WFSRequest","text":"Jussi Jousimo jvj@iki.fi","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSStreamingClient.html","id":null,"dir":"Reference","previous_headings":"","what":"Streams response from a WFS — WFSStreamingClient","title":"Streams response from a WFS — WFSStreamingClient","text":"Dispatches WFS request parses response stream directly.","code":""},{"path":[]},{"path":"https://ropengov.github.io/rwfs/reference/WFSStreamingClient.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Streams response from a WFS — WFSStreamingClient","text":"Jussi Jousimo jvj@iki.fi","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSStreamingRequest.html","id":null,"dir":"Reference","previous_headings":"","what":"An abstract class for building a URL reference to a WFS — WFSStreamingRequest","title":"An abstract class for building a URL reference to a WFS — WFSStreamingRequest","text":"abstract class building URL reference WFS.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/WFSStreamingRequest.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"An abstract class for building a URL reference to a WFS — WFSStreamingRequest","text":"Jussi Jousimo jvj@iki.fi","code":""},{"path":"https://ropengov.github.io/rwfs/reference/asISO8601.html","id":null,"dir":"Reference","previous_headings":"","what":"Returns date time string in ISO8601 format — asISO8601","title":"Returns date time string in ISO8601 format — asISO8601","text":"Converts object can converted POSIXlt object ISO8601  date time string.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/asISO8601.html","id":null,"dir":"Reference","previous_headings":"","what":"Usage","title":"Returns date time string in ISO8601 format — asISO8601","text":"","code":"asISO8601(dt)"},{"path":"https://ropengov.github.io/rwfs/reference/asISO8601.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Returns date time string in ISO8601 format — asISO8601","text":"dt Date time object can converted POSIXlt object.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/asISO8601.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Returns date time string in ISO8601 format — asISO8601","text":"Character string ISO8601 format.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/asISO8601.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"Returns date time string in ISO8601 format — asISO8601","text":"Jussi Jousimo jvj@iki.fi","code":""},{"path":"https://ropengov.github.io/rwfs/reference/rwfs.html","id":null,"dir":"Reference","previous_headings":"","what":"WFS client for R — rwfs","title":"WFS client for R — rwfs","text":"R package provides client access Web Feature Services (WFS) (http://www.opengeospatial.org/standards/wfs).","code":""},{"path":"https://ropengov.github.io/rwfs/reference/rwfs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"WFS client for R — rwfs","text":"client relies GDAL (http://www.gdal.org/) library rgdal (https://cran.r-project.org/package=rgdal) package, installed first. See examples fmi (http://www.github.com/rOpenGov/fmi) gisfin packages (http://www.github.com/rOpenGov/gisfin) inherit abstract R6 classes (https://cran.r-project.org/package=R6) provided package.","code":""},{"path":"https://ropengov.github.io/rwfs/reference/rwfs.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"WFS client for R — rwfs","text":"Jussi Jousimo jvj@iki.fi","code":""},{"path":[]},{"path":"https://ropengov.github.io/rwfs/news/index.html","id":"major-changes-0-2-0","dir":"Changelog","previous_headings":"","what":"MAJOR CHANGES","title":"CHANGES IN VERSION 0.2.0 (2016-10-26)","text":"Switch using sf instead rgdal. Streaming directly WFS supported properly. ogr2ogr command-line conversion (GDAL broadly) required anymore reading data, even WFS 2.0.0 source. Internal function convertOGR() removed.","code":""},{"path":"https://ropengov.github.io/rwfs/news/index.html","id":"new-features-0-2-0","dir":"Changelog","previous_headings":"","what":"NEW FEATURES","title":"CHANGES IN VERSION 0.2.0 (2016-10-26)","text":"Class WFSStreamingRequest new method getParameters() quering request object’s current parameters.","code":""},{"path":"https://ropengov.github.io/rwfs/news/index.html","id":"other-0-2-0","dir":"Changelog","previous_headings":"","what":"OTHER","title":"CHANGES IN VERSION 0.2.0 (2016-10-26)","text":"Basic tests using testthat place. Use download.file(methods = \"internal\", mode = \"wb\") ẀFSClient::getRaster().","code":""}]
